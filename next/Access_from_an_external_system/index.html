<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="lsfusion documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="lsfusion documentation Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-38678623-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="lsfusion documentation" href="/opensearch.xml"><title data-react-helmet="true">Access from an external system | lsfusion documentation</title><meta data-react-helmet="true" property="og:url" content="https://lsfusion.github.io/next/Access_from_an_external_system/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Access from an external system | lsfusion documentation"><meta data-react-helmet="true" name="description" content="Action API"><meta data-react-helmet="true" property="og:description" content="Action API"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://lsfusion.github.io/next/Access_from_an_external_system/"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/next/Access_from_an_external_system/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/ru/next/Access_from_an_external_system/" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/next/Access_from_an_external_system/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.2da82c91.css">
<link rel="preload" href="/assets/js/runtime~main.d57e41ab.js" as="script">
<link rel="preload" href="/assets/js/main.a03fc10b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link" href="/next/Install/">Install</a><a class="navbar__item navbar__link navbar__link--active" href="/next/">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lsfusion/platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/next/">5 (Next)</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/next/Access_from_an_external_system/">5 (Next)</a></li><li><a class="dropdown__link" href="/Access_from_an_external_system/">4.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/next/Access_from_an_external_system/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/ru/next/Access_from_an_external_system/" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">–†—É—Å—Å–∫–∏–π</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/next/">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Paradigm</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Paradigm/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Logical model</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Physical model</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Physical_model/">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Development/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Element identification</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Modularity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Metaprogramming/">Metaprogramming</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Integration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Integration/">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/next/Access_from_an_external_system/">Access from an external system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Access_from_an_internal_system/">Access from an internal system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Access_to_an_external_system_EXTERNAL/">Access to an external system (EXTERNAL)</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Access to an internal system (INTERNAL, FORMULA)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Eval_EVAL/">Eval (EVAL)</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Migration/">Migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Internationalization/">Internationalization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Execution</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Management</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Language</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Language/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Tokens/">Tokens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/IDs/">IDs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Literals/">Literals</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Statements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Coding_conventions/">Coding conventions</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/next/IDE/">IDE</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Examples</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Examples/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Score_table/">Score table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/next/Materials_management/">Materials management</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">How-to</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/next/Online_demo/">Online demo</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for lsfusion documentation <b>5 (Next)</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/Access_from_an_external_system/">latest version</a></b> (4.x).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: 5 (Next)</span><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Access from an external system</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="action-api"></a>Action API<a class="hash-link" href="#action-api" title="Direct link to heading">#</a></h2><p>The platform allows external systems to access an lsFusion-based system using various network protocols. The interface of such interaction is a call for an action with specified parameters and, if necessary, the return of certain property values (without parameters) as <em>results</em>. It is assumed that all parameter and result objects are objects of <a href="/next/Built-in_classes/">built-in classes</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="actiontype"></a>Defining an action<a class="hash-link" href="#actiontype" title="Direct link to heading">#</a></h3><p>An action being called can be defined in one of the three ways:</p><ul><li><code>EXEC</code> ‚Äì the name of the action is specified.</li><li><code>EVAL</code> ‚Äì code in the lsFusion language is specified. It is assumed that this code contains a declaration of an action named <code>run</code>. This is the action that will be called.</li><li><code>EVAL ACTION</code> ‚Äì action code in the lsFusion language is specified. To access a parameter, the special character <code>$</code> and the parameter number (starting from <code>1</code>) are used.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="protocols"></a>Protocols<a class="hash-link" href="#protocols" title="Direct link to heading">#</a></h3><p>The platform currently supports the following network protocols:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="http"></a>HTTP<a class="hash-link" href="#http" title="Direct link to heading">#</a></h4><p>Communication over this protocol is supported both for an application server on port <code>7651</code>, as well as a web server (if any) on the same port, that has a web client installed.</p><p>The URL format, depending on the method of <a href="#actiontype">action definition</a>, looks as follows:</p><ul><li><code>EXEC</code> - <code>http://server address:port/exec?action=&lt;action name&gt;</code>. The <code>action</code> parameter must always be specified.</li><li><code>EVAL</code> - <code>http://server address:port/eval?script=&lt;code&gt;</code>. If the <code>script</code> parameter is not specified, it is assumed that the code is passed in the first BODY parameter.</li><li><code>EVAL ACTION</code> ‚Äì <code>http://server address:port/eval/action?script=&lt;action code&gt;</code>. If the <code>script</code> parameter is not specified, it is assumed that the code is passed in the first BODY parameter.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="url"></a>Parameters<a class="hash-link" href="#url" title="Direct link to heading">#</a></h5><p>Parameters can be passed both in the request string (by appending constructs like <code>&amp;p=&lt;parameter value&gt;</code> to the end of the string), as well as in the request body (BODY). It is assumed that URL parameters are substituted (in the order of their appearance in the request) for the executed action before BODY parameters.</p><p>When processing BODY parameters, parameters with the content type from the following <a href="https://github.com/lsfusion/platform/blob/master/api/src/main/resources/MIMETypes.properties" target="_blank" rel="noopener noreferrer">table</a> are considered files and are passed to the action parameters as objects of the file class (<code>FILE</code>, <code>PDFFILE</code>, etc.). During this process, the corresponding file extension is taken from the table mentioned above. If a particular content type is not found in the table, but it starts with <code>application</code>, the parameter is still considered a file, and the file extension is taken from the right part of the content type (for example, it will be <code>abc</code> for the <code>application/abc</code> content type). Parameters with the <code>application/null</code> content type are considered to be equal to <code>NULL</code>.</p><p>BODY parameters with types of content different from the ones mentioned above are considered strings and are automatically converted into parameter classes of the called action upon being called. Empty strings are converted into <code>NULL</code>.</p><p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields" target="_blank" rel="noopener noreferrer">Headers</a> of an executed request are automatically saved to the <code>System.headers[TEXT]</code> property. The name of the header is written to the only parameter of this property, and the value of the header is written to the property&#x27;s value.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="httpresult"></a>Results<a class="hash-link" href="#httpresult" title="Direct link to heading">#</a></h5><p>Properties whose values must be returned as the result are passed in the request string by adding strings like <code>&amp;return=&lt;property name&gt;</code> to its end. It is assumed that the values of specified properties are returned in the order of their appearance in the request string. By default, if no result properties are specified, the resulting property is the first one with a non-<code>NULL</code> value from the following <a href="/next/Built-in_classes/#export">list</a>. </p><p>If the result of a request is a file (<code>FILE</code>, <code>PDFFILE</code>, etc.), the response <a href="https://en.wikipedia.org/wiki/Media_type" target="_blank" rel="noopener noreferrer">content type</a> , depending on the file extension, is determined in accordance with the following <a href="https://github.com/lsfusion/platform/blob/master/api/src/main/resources/MIMETypes.properties" target="_blank" rel="noopener noreferrer">table</a>. If the file extension is not found in this table, the content type is set to <code>application/&lt;file extension&gt;</code>.</p><p>The file extension in this case is determined automatically, similarly to the <a href="/next/WRITE_operator/"><code>WRITE</code> operator</a>.</p><p>In all of the three cases above, if the result value is <code>NULL</code>, a <code>null</code> string (for example, <code>application/null</code>) is substituted for the file extension in the content type, and an empty string is returned as the response itself.</p><p>Request results different from files are converted into strings and are passed as a <code>text/plain</code> content type. <code>NULL</code> values are returned as empty strings.</p><p>The values of the <code>System.headersTo[TEXT]</code> property are automatically written to the <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields" target="_blank" rel="noopener noreferrer">headers</a> of the request result. So, the header name is read from the only parameter of this property, and the header value is read from the property value.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="several-results--parameters-in-body"></a>Several results / parameters in BODY<a class="hash-link" href="#several-results--parameters-in-body" title="Direct link to heading">#</a></h5><p>If the type of request BODY is <code>multipart/*</code> or <code>application/x-www-form-urlencoded</code>, it will be split into parts, and each part will be considered a separate request parameter. In this case, the order of these parameters is equal to the order in corresponding parts of the request BODY.</p><p>At the same time, if the number of results being returned is more than one, then the following happens:</p><ul><li>If the request has a <code>returnmultitype=bodyurl</code> parameter, the response content type on transmission is set to <code>application/x-www-form-urlencoded</code> and the results are encoded as if they were <a href="#url">passed in the request string</a>.</li><li>Otherwise, the response content type during transmission is set to <code>multipart/mixed</code>, and the results are passed as internal parts of this response. </li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Note that the processing of parameters and request results is largely similar to their processing during <a href="/next/Access_to_an_external_system_EXTERNAL/">access to an external system</a> over the HTTP protocol (in this case, parameters are processed as results and vice versa, results are processed as parameters).</p></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="stateful-api"></a>Stateful API<a class="hash-link" href="#stateful-api" title="Direct link to heading">#</a></h5><p>The API described above is a REST API. Accordingly, the <a href="/next/Change_sessions/">change session</a> is created when a call is initiated, and closes immediately after the call ends. However, there are situations where such behavior is undesirable, and you need to accumulate changes for a certain period of time (for example, while the user is inputting data), which means that the session must be saved and handed over between sessions. In order to do this, you can add a string of the following format to the end of the query string: <code>&amp;session=&lt;session ID&gt;</code>, where <code>&lt;session ID&gt;</code> is any non-empty string. In this case, the session will not be closed after the call, but will be associated with a previously passed ID, so that all subsequent calls with this ID will be executed in this session. In order to close a session (after the end of a call), you need to add the <code>_close</code> postfix (for example,<code>&amp;session=0_close</code>) to its ID in the request string.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Since cookie files are implicitly used for working with HTTP sessions, it is important not to forget to save / pass cookies between stateful http calls (this, however, is typically done automatically by a browser, the HttpClient in Java, etc.)</p></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The current implementation of the platform assumes that if sessions are used, the elements of the system (for example, local properties) created in the current call are deleted ‚Äî that is, they are not visible in subsequent calls.</p></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="authentication"></a>Authentication<a class="hash-link" href="#authentication" title="Direct link to heading">#</a></h5><p>When executing an http request, it is often necessary to identify the user on whose behalf the specified action will be executed. At the moment, two types of authentication are supported by the platform:</p><ul><li><a href="https://en.wikipedia.org/wiki/Basic_access_authentication" target="_blank" rel="noopener noreferrer">Basic identification</a> - the user name and password are passed in an encoded form in the <code>Authorization: Basic &lt;credentials&gt;</code> heading.</li><li>Token-based authentication consists of two stages:<ul><li>At the first stage, you need to execute the <code>Authentication.getAuthToken[]</code> action with basic authentication. The result of this action will be an authentication token with a fixed lifetime (one day <a href="/next/Working_parameters/#authTokenExpiration">by default</a>). An example of a request:  <code>http://localhost/exec?action=getAuthToken</code>.</li><li>The token you receive can be used for authentication during its lifetime by passing it in the <code>Authorization: Bearer &lt;token&gt;</code> header (similarly to JWT which is used in the current implementation of the platform for generating authentication tokens).</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="form"></a>Form API<a class="hash-link" href="#form" title="Direct link to heading">#</a></h2><p>Apart from executing actions, the platform also supports an API (similar to JSON API) for working with <a href="/next/Forms/">forms</a>, or specifically, their <a href="/next/Interactive_view/">interactive views</a>. Since it&#x27;s a stateful API designed for the asynchronous mode (which means that the HTTPS interface itself has a number of system parameters, such as a request index, index of the latest received response, etc.), it&#x27;s easier to use this API with the help of special libraries for specific languages/platforms that you want to integrate with:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="protocols-1"></a>Protocols<a class="hash-link" href="#protocols-1" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="javascript"></a>JavaScript<a class="hash-link" href="#javascript" title="Direct link to heading">#</a></h4><p>The JavaScript library is available in the central npm-repository under the name  <a href="https://www.npmjs.com/~lsfusion" target="_blank" rel="noopener noreferrer">@lsfusion/core</a>.</p><p>The key concept in this API is the concept of <em>state</em>. A state is a JS object with a structure corresponding to form elements in the following way:</p><ul><li><a href="/next/Form_structure/#objects">An object group</a> corresponds to a JS object that is stored in the js field of the state object. The name of the field matches the name of the object group. Each JS object from the object group, in turn, stores an array of JS objects (with <a href="/next/Form_structure/#filters">filters</a> and <a href="/next/Form_structure/#sort">orders</a> taken into account) in the <code>list</code> field. The JS object of the object group corresponds to the <a href="/next/Form_structure/#currentObject">current</a> object collection. Also, each JS object of an array (including the JS object of the object group) in the <code>value</code> field stores the value of objects ‚Äì only values if there is just one object in the object group or, if there are multiple objects, a JS object with fields whose names are equal to object names and values are equal to object values.</li><li><a href="/next/Properties/">Properties</a> correspond to a value stored in a field (the name of the field is equal to the property name) of a JS object which is determined in the following way depending on the existence of parameters and <a href="/next/Interactive_view/#property">its view</a>:<ul><li>A property has parameters:<ul><li>The property view is equal to <code>GRID</code> of each JS object in the <code>list</code> array of the JS object of this property&#x27;s <a href="/next/Form_structure/#drawgroup">display group</a>.</li><li>The property&#x27;s view is equal to <code>PANEL</code>, <code>TOOLBAR</code>  of the JS object of this property&#x27;s display group</li></ul></li><li>A property has no parameters - of a JS state object.</li></ul></li></ul><p>The task of the library is to automatically keep this state described above up to date, both during form creation and during its subsequent modification (this behavior is often called reactivity).</p><p>The library exports the following functions:</p><ul><li><code>create</code> - creates a new form. Parameters:<ul><li><code>setState</code> - a state change request function. This function is supposed to take a single parameter ‚Äì a state change function (which, in turn, has just one parameter, the previous state, and outputs the next state as the result) and as a result of execution add this function to the state change queue (or, for example, apply it right away depending on the implementation of the view logic). This state management logic is fully identical to the state management logic in React and, as a rule, if used inside a React component, the <code>setState</code> parameter is passed as <code>updateState =&gt; this.setState(updateState)</code>.</li><li><code>baseUrl</code> - the URL of the lsFusion web server - a string, for example <code>&#x27;https://demo.lsfusion.org/hockeystats&#x27;</code>.</li><li><code>formData</code> - an object describing the form. Must contain either a name field with the name of the form (for example <code>{name: &quot;MainForm&quot;}</code>) or a script field with the form code (for example, <code>script:&quot;OBJECTS i = Invoice PROPERTIES (i) date, stock&quot;</code>)</li></ul></li><li><code>change</code> - changes the form data. Parameters:<ul><li><code>setState</code> - a state change request function.</li><li><code>changes</code> - a JS object containing what exactly needs to be changed. The structure of a JS change object is the same as that of the JS state object, except that a JS object of an object group does not have/is not supposed to have a <code>list</code> field ‚Äì that is, all changes are supposed to be made for current object collection. However, if necessary, the <code>value</code> can be set to a single-element array, which will mean that there is no need to change the current object, but property values should be changed for the specified, not the current object. For example, <code>change(setState, {game:{value:[30], hostGoals:40, guestGoals:30}})</code> will change the number of goals to <code>40</code> and <code>30</code>, but not for the current game, but for one with an object id <code>30</code>. You can also specify actions in a JS change object (there are no actions in JS state objects). The value of the corresponding field in this case can be arbitrary. For example, <code>change(setState, {game: {doSmthWithGame : true}})</code></li><li><code>currentState</code> - a JS object of the current state. Optional parameter. In order to ensure the best UX in the asynchronous mode, it is advised that the user change values only for the objects that he sees during the change and not when the change is processed (the state can change at this moment and so can current objects). Therefore, when calling this function, it is recommended to pass the state that was used to render the view in which the user initiated this change as the <code>currentState</code> parameter.</li></ul></li><li><code>close</code> - closes the form. Parameters:<ul><li><code>setState</code> - a state change request function.</li></ul></li><li><code>formCreated</code> - checks whether the form has been initialized (and, accordingly, whether the state has been filled). Returns a boolean value. Parameters:<ul><li><code>state</code> - a JS state object</li></ul></li><li><code>numberOfPendingRequests</code> - show how many change requests are currently queued. Returns a long type value. Parameters:<ul><li><code>state</code> - a JS state object</li></ul></li></ul><p>As the names of object groups and properties, not names on the form are used, but <a href="/next/Structured_view/#extid">export/import</a> names (which, however, match the names on forms if not explicitly defined). While working with a form via Form API, actions created using operators for <a href="/next/Interactive_view/#objectoperators">object operations</a> <code>NEW</code> and <code>DELETE</code> automatically get export/import names <code>NEW</code> and <code>DELETE</code>, respectively (that is you can call <code>change(setState, {game : {NEW:true}})</code> for adding an object, for example). Also, when Form API is used, it automatically adds a property called <code>logMessage</code> to the form to which all dialog messages are written (including those generated when <a href="/next/Constraints/">constraints</a> were violated).</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Authentication, stateful and form API are only supported when executing http requests on the web server. When an application server (or specifically, a built-in web server) executes an HTTP request, authentication headers, as well as parameters with the session ID, are ignored (the user is considered anonymous). Form API is completely unsupported by the built-in web server.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="action-api-python"></a>Action API (Python)<a class="hash-link" href="#action-api-python" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><pre tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> json</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> requests</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> requests_toolbelt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">multipart </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> decoder</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">lsfCode </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;run(INTEGER no, DATE date, FILE detail) {\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;    NEW o = FOrder {\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        no(o) &lt;- no;\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        date(o) &lt;- date;\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        LOCAL detailId = INTEGER (INTEGER);\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        LOCAL detailQuantity = INTEGER (INTEGER);\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        IMPORT JSON FROM detail TO detailId, detailQuantity;\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        FOR imported(INTEGER i) DO {\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;            NEW od = FOrderDetail {\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;                id(od) &lt;- detailId(i);\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;                quantity(od) &lt;- detailQuantity(i);\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;                price(od) &lt;- 5;\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;                order(od) &lt;- o;\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;            }\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        }\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        APPLY;\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        EXPORT JSON FROM price = price(FOrderDetail od), id = id(od) WHERE order(od) == o;\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;        EXPORT FROM orderPrice(o), exportFile();\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;    }\n&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;}&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">order_no </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">354</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">order_date </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;10.10.2017&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">order_details </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token builtin" style="color:rgb(72, 118, 214)">dict</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token builtin" style="color:rgb(72, 118, 214)">id</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">                 </span><span class="token builtin" style="color:rgb(72, 118, 214)">dict</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token builtin" style="color:rgb(72, 118, 214)">id</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">15</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">                 </span><span class="token builtin" style="color:rgb(72, 118, 214)">dict</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token builtin" style="color:rgb(72, 118, 214)">id</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">4</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">                 </span><span class="token builtin" style="color:rgb(72, 118, 214)">dict</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token builtin" style="color:rgb(72, 118, 214)">id</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">18</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">                 </span><span class="token builtin" style="color:rgb(72, 118, 214)">dict</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token builtin" style="color:rgb(72, 118, 214)">id</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">11</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">                 </span><span class="token builtin" style="color:rgb(72, 118, 214)">dict</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token builtin" style="color:rgb(72, 118, 214)">id</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">12</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> quantity</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">order_json </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">order_details</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">url </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;http://localhost:7651/eval&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">payload </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;script&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> lsfCode</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;no&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">str</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">order_no</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;date&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> order_date</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">           </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;detail&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;order.json&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> order_json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;text/json&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">response </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">post</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> files</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">payload</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">multipart_data </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> decoder</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">MultipartDecoder</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">from_response</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">sum_part</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> json_part </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> multipart_data</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">parts</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token builtin" style="color:rgb(72, 118, 214)">sum</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">int</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">sum_part</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">text</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">data </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">json_part</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">text</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">##############################################################</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token builtin" style="color:rgb(72, 118, 214)">sum</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> item </span><span class="token keyword" style="color:rgb(12, 150, 155)">in</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;{0:3}: price {1}&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">format</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token builtin" style="color:rgb(72, 118, 214)">int</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;id&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">int</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;price&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">##############################################################</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 205</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">#   4: price 5</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">#  18: price 5</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">#   3: price 5</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">#   1: price 5</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">#  10: price 5</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">#  15: price 5</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="form-api-javascript"></a>Form API (JavaScript)<a class="hash-link" href="#form-api-javascript" title="Direct link to heading">#</a></h3></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/lsfusion/platform/edit/master/docs/en/Access_from_an_external_system.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-06-09T14:39:43.000Z">6/9/2021</time></b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/next/Integration/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/next/Access_from_an_internal_system/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Access from an internal system ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#action-api" class="table-of-contents__link">Action API</a><ul><li><a href="#actiontype" class="table-of-contents__link">Defining an action</a></li><li><a href="#protocols" class="table-of-contents__link">Protocols</a></li></ul></li><li><a href="#form" class="table-of-contents__link">Form API</a><ul><li><a href="#protocols-1" class="table-of-contents__link">Protocols</a></li></ul></li><li><a href="#examples" class="table-of-contents__link">Examples</a><ul><li><a href="#action-api-python" class="table-of-contents__link">Action API (Python)</a></li><li><a href="#form-api-javascript" class="table-of-contents__link">Form API (JavaScript)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">lsf docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://ru.stackoverflow.com/questions/tagged/lsfusion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://slack.lsfusion.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/lsfusion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://habr.com/ru/company/lsfusion/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Habr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/lsfusion/platform" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 lsFusion Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d57e41ab.js"></script>
<script src="/assets/js/main.a03fc10b.js"></script>
</body>
</html>