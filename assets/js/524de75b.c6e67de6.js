"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([[80007],{1072:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>g});var a=n(74848),o=n(28453);const r={title:"Aggregations"},i=void 0,s={id:"Aggregations",title:"Aggregations",description:"Aggregation is the creation of a unique (aggregate) of the object corresponding to each non-NULL value of some aggregated property. Each such object is assumed to have properties that map this object to each aggregated property parameter, and, conversely, a property that maps the aggregated property parameters to this object.",source:"@site/versioned_docs/version-v5/Aggregations.md",sourceDirName:".",slug:"/Aggregations",permalink:"/Aggregations",draft:!1,unlisted:!1,editUrl:"https://github.com/lsfusion/platform/edit/v5/docs/en/Aggregations.md",tags:[],version:"v5",lastUpdatedAt:1685108136e3,frontMatter:{title:"Aggregations"},sidebar:"learn",previous:{title:"Static objects",permalink:"/Static_objects"},next:{title:"View logic",permalink:"/View_logic"}},c={},g=[{value:"Language",id:"language",level:3},{value:"Examples",id:"examples",level:3}];function p(e){const t={a:"a",code:"code",em:"em",h3:"h3",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["Aggregation is the creation of a unique (",(0,a.jsx)(t.em,{children:"aggregate"}),") of the object corresponding to each non-",(0,a.jsx)(t.code,{children:"NULL"})," value of some ",(0,a.jsx)(t.em,{children:"aggregated"})," property. Each such object is assumed to have properties that map this object to each aggregated property parameter, and, conversely, a property that maps the aggregated property parameters to this object."]}),"\n",(0,a.jsxs)(t.p,{children:["The aggregated object and each aggregated property parameter must belong to a specified ",(0,a.jsx)(t.a,{href:"/Classes",children:"class"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["The aggregation mechanism is implemented using two ",(0,a.jsx)(t.a,{href:"/Simple_constraints",children:"consequences"})," with automatic resolution and an ",(0,a.jsx)(t.a,{href:"/Grouping_GROUP",children:"aggregation"})," operator. With the help of the aggregation operator, the first consequence creates an object when the aggregated property becomes non-",(0,a.jsx)(t.code,{children:"NULL"}),", and writes the necessary values to all its properties. The second consequence deletes the object when the aggregated property becomes ",(0,a.jsx)(t.code,{children:"NULL"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"language",children:"Language"}),"\n",(0,a.jsxs)(t.p,{children:["To create aggregations, use the ",(0,a.jsxs)(t.a,{href:"/AGGR_operator",children:["operator",(0,a.jsx)(t.code,{children:"AGGR"})]}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-lsf",children:"CLASS A; CLASS B; CLASS C;\nf = DATA INTEGER (A, B);\nc = AGGR C WHERE f(A a, B b) MATERIALIZED INDEXED;\n\nCLASS AB;\nab = AGGR AB WHERE A a IS A AND B b IS B; // for each A B pair creates an object AB\n\nCLASS Shipment 'Delivery';\ndate = ABSTRACT DATE (Shipment);\nCLASS Invoice 'Invoice';\ncreateShipment 'Create delivery' = DATA BOOLEAN (Invoice);\ndate 'Shipment date' = DATA DATE (Invoice);\nCLASS ShipmentInvoice 'Delivery by invoice' : Shipment;\n// creating a delivery by invoice, if the option for delivery creation is defined for the invoice\nshipment(Invoice invoice) = AGGR ShipmentInvoice WHERE createShipment(invoice); \ndate(ShipmentInvoice si) += sum(date(invoice(si)),1); // delivery date = invoice date + 1\n"})})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>s});var a=n(96540);const o={},r=a.createContext(o);function i(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);