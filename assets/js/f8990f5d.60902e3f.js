"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([[93310],{32032:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>a});var r=t(74848),i=t(28453);const s={title:"Event block"},c=void 0,o={id:"Event_block",title:"Event block",description:"The event block of the  FORM statement - a set of constructions controlling events in an interactive form view.",source:"@site/docs/Event_block.md",sourceDirName:".",slug:"/Event_block",permalink:"/next/Event_block",draft:!1,unlisted:!1,editUrl:"https://github.com/lsfusion/platform/edit/master/docs/en/Event_block.md",tags:[],version:"current",lastUpdatedAt:1708525070,formattedLastUpdatedAt:"Feb 21, 2024",frontMatter:{title:"Event block"},sidebar:"learn",previous:{title:"Filters and sortings block",permalink:"/next/Filters_and_sortings_block"},next:{title:"DESIGN statement",permalink:"/next/DESIGN_statement"}},l={},a=[{value:"Syntax",id:"syntax",level:3},{value:"Description",id:"description",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Examples",id:"examples",level:3}];function d(e){const n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The event block of the  ",(0,r.jsxs)(n.a,{href:"/next/FORM_statement",children:[(0,r.jsx)(n.code,{children:"FORM"})," statement"]})," - a set of constructions controlling ",(0,r.jsx)(n.a,{href:"/next/Form_events",children:"events"})," in an interactive form view."]}),"\n",(0,r.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"EVENTS formEventDecl1, ..., formEventDeclN\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Where each ",(0,r.jsx)(n.code,{children:"formEventDecli"})," has the following syntax:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ON eventType eventActionId(param1, ..., paramK) | { eventActionOperator }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["The event block allows to define handlers for ",(0,r.jsx)(n.a,{href:"/next/Form_events",children:"form events"})," that occur as the result of certain user actions. Each block can have an arbitrary number of comma-separated event handlers. If several handlers are defined for an event, they are guaranteed to be executed in the order they are defined."]}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"eventType"})}),"\n",(0,r.jsx)(n.p,{children:"Type of form event. It is specified with one of the following keywords:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"INIT"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"OK"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"OK BEFORE"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"OK AFTER"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"APPLY"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"APPLY BEFORE"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"APPLY AFTER"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"CANCEL"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"CLOSE"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"DROP"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CHANGE objName"})," \u2013 specifies that the action will be executed when the object ",(0,r.jsx)(n.code,{children:"objName"})," is changed."]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"QUERYOK"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"QUERYCANCEL"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SCHEDULE PERIOD intPeriod [FIXED]"})," - creates a scheduler that executes an action every ",(0,r.jsx)(n.code,{children:"intPeriod"})," seconds. ",(0,r.jsx)(n.code,{children:"FIXED"})," indicates that the period to the next action is counted from the start of the current action. By default, the period is counted from the end of the current action."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"eventActionId"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.a,{href:"/next/IDs#propertyid",children:"ID of the action"}),", that will be the event handler."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"param1, ..., paramK"})}),"\n",(0,r.jsxs)(n.p,{children:["List of action parameters. Each parameter is specified with the object name on the form. The object name, in turn, is specified with a ",(0,r.jsx)(n.a,{href:"/next/IDs#id",children:"simple ID"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"actionOperator"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/next/Action_operators#contextdependent",children:"Context-dependent action operator"}),". You can use the names of already declared objects on the form as parameters."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lsf",children:"showImpossibleMessage()  { MESSAGE 'It\\'s impossible'; };\r\n\r\nposted = DATA BOOLEAN (Invoice);\r\n\r\nFORM invoice 'Invoice' // creating a form for editing an invoice\r\n    OBJECTS i = Invoice PANEL // creating an object of the invoice class\r\n\r\n//    ...  setting the rest of the form behavior\r\n\r\n    EVENTS\r\n        // specifying that when the user clicks OK, an action should be executed \r\n        // that will execute actions to \"conduction\" this invoice\r\n        ON OK { posted(i) <- TRUE; },\r\n \r\n        // by clicking the formDrop button, showing a message that this cannot be, \r\n        // since this button by default will be shown only in the form for choosing an invoice, \r\n        // and this form is basically an invoice edit form\r\n        ON DROP showImpossibleMessage() \r\n;\r\n\r\nCLASS Shift;\r\ncurrentShift = DATA Shift();\r\n\r\nCLASS Cashier;\r\ncurrentCashier = DATA Cashier();\r\n\r\nCLASS Receipt;\r\nshift = DATA Shift (Receipt);\r\ncashier = DATA Cashier (Receipt);\r\n\r\nFORM POS 'POS' // declaring the form for product sale to the customer in the salesroom\r\n\r\n    OBJECTS r = Receipt PANEL // adding an object that will store the current receipt\r\n\r\n    //  ... declaring the behavior of the form\r\n;\r\n\r\ncreateReceipt ()  {\r\n    NEW r = Receipt {\r\n        shift(r) <- currentShift();\r\n        cashier(r) <- currentCashier();\r\n\r\n        SEEK POS.r = r;\r\n    }\r\n}\r\n\r\n// adding a property through the form extension so that SEEK could be applied to the already created\r\n// object on the form\r\nEXTEND FORM POS \r\n    EVENTS\r\n        // when opening the form, executing the action to create a new receipt, \r\n        // which fills in the shift, cashier and other information\r\n        ON INIT createReceipt()\r\n        //apply every 60 seconds\r\n        ON SCHEDULE PERIOD 60 FIXED apply(); \r\n;\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>o});var r=t(96540);const i={},s=r.createContext(i);function c(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);