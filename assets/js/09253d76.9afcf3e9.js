"use strict";(self.webpackChunkls_fusion_docs=self.webpackChunkls_fusion_docs||[]).push([[50731],{67192:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var r=t(74848),o=t(28453);const a={title:"How-to: Filtering and ordering"},s=void 0,i={id:"How-to_Filtering_and_ordering",title:"How-to: Filtering and ordering",description:"Example 1",source:"@site/versioned_docs/version-v4/How-to_Filtering_and_ordering.md",sourceDirName:".",slug:"/How-to_Filtering_and_ordering",permalink:"/v4/How-to_Filtering_and_ordering",draft:!1,unlisted:!1,editUrl:"https://github.com/lsfusion/platform/edit/v4/docs/en/How-to_Filtering_and_ordering.md",tags:[],version:"v4",lastUpdatedAt:1625651520,formattedLastUpdatedAt:"Jul 7, 2021",frontMatter:{title:"How-to: Filtering and ordering"},sidebar:"learn",previous:{title:"How-to: Documents with lines",permalink:"/v4/How-to_Documents_with_lines"},next:{title:"How-to: Design",permalink:"/v4/How-to_Design"}},l={},d=[{value:"Example 1",id:"example-1",level:2},{value:"Task",id:"task",level:3},{value:"Solution",id:"solution",level:3},{value:"Example 2",id:"example-2",level:2},{value:"Task",id:"task-1",level:3},{value:"Solution",id:"solution-1",level:3},{value:"Example 3",id:"example-3",level:2},{value:"Task",id:"task-2",level:3},{value:"Solution",id:"solution-2",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"example-1",children:"Example 1"}),"\n",(0,r.jsx)(n.h3,{id:"task",children:"Task"}),"\n",(0,r.jsx)(n.p,{children:"There are remaining books in stock."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lsf",children:"CLASS Book 'Book';\r\nname 'Name' = DATA ISTRING[100] (Book);\r\n\r\nCLASS Stock 'Warehouse';\r\nname 'Name' = DATA ISTRING[100] (Stock);\r\n\r\n// for example it is made a data property, although usually it is calculated\r\nbalance 'Balance' = DATA INTEGER (Book, Stock); \n"})}),"\n",(0,r.jsx)(n.p,{children:"We need to create a form to display the balances of books in a given stock in alphabetical order."}),"\n",(0,r.jsx)(n.h3,{id:"solution",children:"Solution"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lsf",children:"FORM onStockObject 'Balances'\r\n    OBJECTS s = Stock PANEL\r\n    PROPERTIES(s) name SELECTOR\r\n\r\n    OBJECTS b = Book\r\n    PROPERTIES READONLY name(b), balance(b, s)\r\n    ORDERS name(b)\r\n\r\n    // Option 1\r\n    FILTERS balance(b, s)\r\n\r\n    // Option 2\r\n    FILTERGROUP bal\r\n        FILTER 'With positive balance' balance(b, s) > 0 'F10'\r\n        FILTER 'With negative balance' balance(b, s) < 0 'F9'\r\n        FILTER 'With balance' balance(b, s) 'F8' DEFAULT\r\n        FILTER 'No remainder' NOT balance (b, s) 'F7'\r\n;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Option 1 sets up a fixed filter that the user cannot remove. Option 2 allows the user to choose between predefined criteria (by default the one for which the ",(0,r.jsx)(n.code,{children:"DEFAULT"})," option is set)."]}),"\n",(0,r.jsx)(n.h2,{id:"example-2",children:"Example 2"}),"\n",(0,r.jsx)(n.h3,{id:"task-1",children:"Task"}),"\n",(0,r.jsxs)(n.p,{children:["Similar to ",(0,r.jsx)(n.a,{href:"#example-1",children:(0,r.jsx)(n.strong,{children:"Example 1"})}),"."]}),"\n",(0,r.jsx)(n.p,{children:"We need to create a form to display remaining books in several warehouses, with the possibility of filtering by a specific warehouse. Ordering should be first by warehouse, and within that by book title."}),"\n",(0,r.jsx)(n.h3,{id:"solution-1",children:"Solution"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lsf",children:"filterStock = DATA LOCAL Stock ();\r\nnameFilterStock 'Warehouse' = name(filterStock());\r\n\r\nFORM onStockLocal 'Balances'\r\n    PROPERTIES() nameFilterStock\r\n\r\n    OBJECTS sb = (s = Stock, b = Book)\r\n    PROPERTIES READONLY name(s), name(b), balance(b, s)\r\n    ORDERS name(s), name(b)\r\n\r\n    FILTERS s == filterStock() OR NOT filterStock()\r\n;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In this case a warehouse cannot be declared via the ",(0,r.jsx)(n.code,{children:"OBJECTS"})," block, because then not specifying a warehouse for filtering will not be an option."]}),"\n",(0,r.jsx)(n.h2,{id:"example-3",children:"Example 3"}),"\n",(0,r.jsx)(n.h3,{id:"task-2",children:"Task"}),"\n",(0,r.jsx)(n.p,{children:"There is a list of orders for certain customers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lsf",children:"CLASS Customer 'Customer';\r\nname 'Name' = DATA ISTRING[100] (Customer);\r\n\r\nCLASS Order 'Order';\r\ndate 'Date' = DATA DATE (Order);\r\n\r\ncustomer 'Customer' = DATA Customer (Order);\r\nnameCustomer 'Customer' (Order o) = name(customer(o));\n"})}),"\n",(0,r.jsx)(n.p,{children:"We need to create a form to display the list of orders allowing to filter by date and/or customer. By default, orders should be in descending date order."}),"\n",(0,r.jsx)(n.h3,{id:"solution-2",children:"Solution"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lsf",children:"filterCustomer = DATA LOCAL Customer ();\r\nnameFilterCustomer 'Customer' = name(filterCustomer());\r\n\r\nFORM orders 'Orders'\r\n    PROPERTIES() nameFilterCustomer\r\n\r\n    OBJECTS dates = (dateFrom = DATE, dateTo = DATE) PANEL\r\n    PROPERTIES df = VALUE(dateFrom), dt = VALUE(dateTo)\r\n\r\n    OBJECTS o = Order\r\n    PROPERTIES(o) READONLY do = date, nameCustomer\r\n    ORDERS do DESC\r\n    FILTERS date(o) >= dateFrom, date(o) <= dateTo,\r\n            customer(o) == filterCustomer() OR NOT filterCustomer()\r\n;\n"})}),"\n",(0,r.jsx)(n.p,{children:"It should be noted that the dates in this case should always be selected (by default, the current date will be set when the form is opened). But it is possible not to select a customer."}),"\n",(0,r.jsxs)(n.p,{children:["Also, note that what is set in ",(0,r.jsx)(n.code,{children:"ORDER BY"})," is not an expression but a specific property added to the form. Thus, we cannot order by a property that has not been added to the form."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var r=t(96540);const o={},a=r.createContext(o);function s(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);