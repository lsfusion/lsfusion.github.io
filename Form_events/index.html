<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="lsfusion documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="lsfusion documentation Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-38678623-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="lsfusion documentation" href="/opensearch.xml"><title data-react-helmet="true">Form events | lsfusion documentation</title><meta data-react-helmet="true" property="og:url" content="https://lsfusion.github.io/Form_events/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v4"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v4"><meta data-react-helmet="true" property="og:title" content="Form events | lsfusion documentation"><meta data-react-helmet="true" name="description" content="While the application is running, there is a number of events for each form that occur as a result of certain user actions:"><meta data-react-helmet="true" property="og:description" content="While the application is running, there is a number of events for each form that occur as a result of certain user actions:"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://lsfusion.github.io/Form_events/"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/Form_events/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/ru/Form_events/" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/Form_events/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.2da82c91.css">
<link rel="preload" href="/assets/js/runtime~main.fe33a43d.js" as="script">
<link rel="preload" href="/assets/js/main.307bb336.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link" href="/Install/">Install</a><a class="navbar__item navbar__link navbar__link--active" href="/">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lsfusion/platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/">4.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/Form_events/">5 (Next)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Form_events/">4.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/Form_events/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/ru/Form_events/" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">Русский</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Paradigm</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Paradigm/">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Logical model</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Logical_model/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Domain logic</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">View logic</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/View_logic/">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Forms</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Forms/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Form structure</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Form views</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Form_views/">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Interactive view</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Interactive_view/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Form_design/">Form design</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Form_events/">Form events</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Form operators</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Static view</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Open form</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Navigator</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Physical model</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Language</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Language/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Tokens/">Tokens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/IDs/">IDs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Literals/">Literals</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Statements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Coding_conventions/">Coding conventions</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/IDE/">IDE</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Examples</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Examples/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Score_table/">Score table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Materials_management/">Materials management</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">How-to</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/Online_demo/">Online demo</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: 4.x</span><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Form events</h1></header><p>While the application is running, there is a number of events for each form that occur as a result of certain user actions:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="global"></a>Global<a class="hash-link" href="#global" title="Direct link to heading">#</a></h4><ul><li><code>QUERYCLOSE</code> - the user tries to close the form by clicking on the corresponding button in the form header.</li><li><code>QUERYOK</code> - the user tries to close a modal form by double-clicking on any row in the table.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="for-objects-on-the-form"></a>For objects on the form<a class="hash-link" href="#for-objects-on-the-form" title="Direct link to heading">#</a></h4><ul><li><code>CHANGE</code> - user <a href="/Interactive_view/#objects">changed</a> the <a href="/Form_structure/#currentObject">current value</a> of an object.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="property"></a>For properties or actions on the form<a class="hash-link" href="#property" title="Direct link to heading">#</a></h4><ul><li><code>CHANGE</code> - the user initiated a property change or action call.</li><li><code>CHANGEWYS</code> - the user initiated a WYSIWYG property change using the PASTE operation or a special input mechanism </li><li><code>GROUPCHANGE</code> - the user initiated a property change for all objects in the table</li><li><code>EDIT</code> - the user initiated editing of an object</li><li><code>CONTEXTMENU</code> - the user selected the specified item in the context menu of a property (action) on the form</li></ul><p>There are also several so-called <em>derivative</em> events that are nothing more than syntactic sugar, but at the same time allow you more effectively to solve typical problems that arise when working with forms:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="global-1"></a>Global<a class="hash-link" href="#global-1" title="Direct link to heading">#</a></h4><ul><li><code>INIT</code> - occurs immediately after the form is opened.</li><li><code>APPLY</code> - occurs when the form session is saved to the database (inside the transaction, at the very beginning, before global event handling is performed).</li><li><code>APPLY BEFORE</code> - occurs immediately before the form session is saved to the database (before the start of the transaction).</li><li><code>APPLY AFTER</code> - occurs immediately after the form session is successfully saved to the database (after the end of the transaction).</li><li><code>CANCEL</code> - occurs when the form session changes are canceled.</li><li><code>CLOSE</code> - occurs when the <code>System.formClose</code> action is executed.</li><li><code>DROP</code> - occurs when the <code>System.formDrop</code> action is executed.</li></ul><p>If the form is <a href="/Interactive_view/#owner">the session owner</a> (meaning that when the <code>System.formOk</code> action is executed the form session <a href="/Apply_changes_APPLY/">is saved</a>):</p><ul><li><code>OK</code>, <code>OK BEFORE</code>, <code>OK AFTER</code> - occurs when the <code>System.formOk</code> action is executed, at the moments similar to the corresponding moments for the <code>APPLY</code> event (i.e. inside, before and after the transaction). In this case, <code>OK</code> and <code>OK BEFORE</code> handlers are executed before executing <code>APPLY</code> and <code>APPLY BEFORE</code> handlers, and <code>OK AFTER</code> is executed after <code>APPLY AFTER</code>.</li></ul><p>If the form is not the session owner:</p><ul><li><code>OK</code> - occurs when the<code>System.formOk</code> action is executed</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If <code>OK BEFORE</code> and <code>OK AFTER</code> handlers are defined, but the form is not the session owner, these handlers are still executed, respectively before and after the <code>OK</code> event handler.</p></div></div><p>If, after the execution of event handlers with the <code>BEFORE</code> postfix, the <code>System.applyCanceled</code> property value equals <code>TRUE</code>, further execution of the action that led to the occurrence of this event is stopped (for example, with <code>APPLY BEFORE</code>, saving the session is interrupted as if one of the existing constraints had been <a href="/Constraints/">violated</a>).</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>For the remainder of the section, the behavior of properties and actions is exactly the same and so we will use only the term property (behavior is absolutely identical for actions).</p></div></div><p>The developer can execute certain actions (<em>handlers</em>) when any of the events described above occurs. In the current implementation there can be several handlers for global events and form object events, but only one for form property events. In the first case, the handler is added to the corresponding list, in the second case, the handler replaces the existing one.</p><p>For property, it is possible to define its event handlers for the whole logics at once. In that case, these handlers will be automatically added to all forms where these properties are displayed.</p><a class="lsdoc-anchor" id="keyboard"></a><p>You can also specify a keyboard shortcut for each property, pressing which triggers the property&#x27;s <code>CHANGE</code> event. If several properties on the form correspond to one key combination, the event will be triggered only for the property whose component is closest to the current active component in the component hierarchy.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="default"></a>Default handlers<a class="hash-link" href="#default" title="Direct link to heading">#</a></h3><p>For some events, the platform automatically creates default handlers:</p><ul><li><p><code>QUERYCLOSE</code></p><p>  Calls the <code>System.formClose</code> action</p></li><li><p><code>QUERYOK</code></p><p>  Calls the <code>System.formOk</code> action</p></li><li><p><code>CHANGE</code></p><p>  The user is requested for an object of the changed property value class, after which the received object is written to this property. If the property is not <a href="/Property_change_CHANGE/#changeable">mutable</a>, the <a href="/Interactive_view/#userfilters">user filter</a> mechanism for this property (or for the property specified using the corresponding option) is automatically called.</p></li><li><p><code>GROUPCHANGE</code></p><p>  Calls the <code>CHANGE</code> event handler for all objects that meet the filter conditions of the object group in which the changed property is displayed. </p></li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If property event handler uses (even <a href="/Value_request_REQUEST/#implicit">implicitly</a>) the <a href="/Value_request_REQUEST/">value request</a> operator, then default handler can be created <a href="/Value_request_REQUEST/#defaultChange">in a different way</a>.</p></div></div><a class="lsdoc-anchor" id="queryValue"></a><p>For an <em>object request</em> from the user, depending on the type of class, the following operators are used:</p><ul><li><a href="/Built-in_classes/">Builtin classes</a> - the <a href="/Primitive_input_INPUT/">input primitive</a> operator.</li><li><a href="/User_classes/">Custom classes</a> - the <a href="/In_an_interactive_view_SHOW_DIALOG/">open form</a> operator. The form is the <a href="/Interactive_view/#edtClass">list</a> form for this class. </li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="predefined"></a>Standard handlers<a class="hash-link" href="#predefined" title="Direct link to heading">#</a></h3><p>For properties and actions on the form, it is also possible to define the following <em>standard</em> change event handlers (<code>CHANGE</code>, <code>CHANGEWYS</code>, <code>GROUPCHANGE</code>, <code>EDIT</code>): </p><ul><li><em>Read Only</em> (<code>READONLY</code>) - if the property is displayed in the table, the handler will be similar to <code>CHANGE</code> default handler when the property is not mutable (that is, the user filter mechanism will be called). If the property is not displayed in the table, nothing will happen. You can also make this option conditional (<code>READONLYIF</code>) (that is, change only if the value of some property is not <code>NULL</code>).</li><li><em>Selector</em> (<code>SELECTOR</code>) - when you try to make a change, a dialog will be shown in which the user will be asked to change the <a href="/Form_structure/#currentObject">current value</a> of the object.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="language"></a>Language<a class="hash-link" href="#language" title="Direct link to heading">#</a></h3><p>To define the form event handlers, use the <code>ON</code> option in the <code>FORM</code> statement (<a href="/Event_block/">events</a> block, <a href="/Properties_and_actions_block/">properties and actions</a> block, <a href="/Object_blocks/#objects">objects</a> block), as well as in <a href="/Property_options/">property options</a>. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">showImpossibleMessage()  { MESSAGE &#x27;It\&#x27;s impossible&#x27;; };</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">posted = DATA BOOLEAN (Invoice);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">FORM invoice &#x27;Invoice&#x27; // creating a form for editing an invoice</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS i = Invoice PANEL // creating an object of the invoice class</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">//    ...  setting the rest of the form behavior</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    EVENTS</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        // specifying that when the user clicks OK, an action should be executed that will execute</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        // actions to &quot;conduction&quot; this invoice</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        ON OK { posted(i) &lt;- TRUE; }, </span></span><span class="token-line" style="color:#403f53"><span class="token plain">        // by clicking the formDrop button, showing a message that this cannot be, since this button </span></span><span class="token-line" style="color:#403f53"><span class="token plain">        // by default will be shown only in the form for choosing an invoice, and this form is basically </span></span><span class="token-line" style="color:#403f53"><span class="token plain">        // an invoice edit form</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        ON DROP showImpossibleMessage() </span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CLASS Shift;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">currentShift = DATA Shift();</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CLASS Cashier;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">currentCashier = DATA Cashier();</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CLASS Receipt;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">shift = DATA Shift (Receipt);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">cashier = DATA Cashier (Receipt);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">FORM POS &#x27;POS&#x27; // declaring the form for product sale to the customer in the salesroom</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS r = Receipt PANEL // adding an object that will store the current receipt</span></span><span class="token-line" style="color:#403f53"><span class="token plain">//    ... declaring the behavior of the form</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">createReceipt ()  {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    NEW r = Receipt {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        shift(r) &lt;- currentShift();</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        cashier(r) &lt;- currentCashier();</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        SEEK POS.r = r;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    }</span></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">// adding a property through the form extension so that SEEK could be applied</span></span><span class="token-line" style="color:#403f53"><span class="token plain">// to the already created object on the form</span></span><span class="token-line" style="color:#403f53"><span class="token plain">EXTEND FORM POS </span></span><span class="token-line" style="color:#403f53"><span class="token plain">    EVENTS</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        // when opening the form, executing the action to create a new receipt,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        // which fills in the shift, cashier and other information</span></span><span class="token-line" style="color:#403f53"><span class="token plain">        ON INIT createReceipt() </span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/lsfusion/platform/edit/v4/docs/en/Form_events.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-07-07T09:52:00.000Z">7/7/2021</time></b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Form_design/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Form design</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Form_operators/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#default" class="table-of-contents__link">Default handlers</a></li><li><a href="#predefined" class="table-of-contents__link">Standard handlers</a></li><li><a href="#language" class="table-of-contents__link">Language</a></li><li><a href="#examples" class="table-of-contents__link">Examples</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">lsf docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://ru.stackoverflow.com/questions/tagged/lsfusion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://slack.lsfusion.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/lsfusion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://habr.com/ru/company/lsfusion/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Habr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/lsfusion/platform" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 lsFusion Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fe33a43d.js"></script>
<script src="/assets/js/main.307bb336.js"></script>
</body>
</html>