<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="lsfusion documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="lsfusion documentation Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-38678623-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="lsfusion documentation" href="/opensearch.xml"><title data-react-helmet="true">Score table | lsfusion documentation</title><meta data-react-helmet="true" property="og:url" content="https://lsfusion.github.io/Score_table/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v4"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v4"><meta data-react-helmet="true" property="og:title" content="Score table | lsfusion documentation"><meta data-react-helmet="true" name="description" content="&quot;Score table&quot; task description"><meta data-react-helmet="true" property="og:description" content="&quot;Score table&quot; task description"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://lsfusion.github.io/Score_table/"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/Score_table/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/ru/Score_table/" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://lsfusion.github.io/Score_table/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.2da82c91.css">
<link rel="preload" href="/assets/js/runtime~main.fca95e41.js" as="script">
<link rel="preload" href="/assets/js/main.307bb336.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link" href="/Install/">Install</a><a class="navbar__item navbar__link navbar__link--active" href="/">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lsfusion/platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/">4.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/Score_table/">5 (Next)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Score_table/">4.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/Score_table/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/ru/Score_table/" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">–†—É—Å—Å–∫–∏–π</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Paradigm</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Paradigm/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Logical model</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Physical model</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Language</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Language/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Tokens/">Tokens</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/IDs/">IDs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Literals/">Literals</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Statements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Coding_conventions/">Coding conventions</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/IDE/">IDE</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Examples</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Examples/">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Score_table/">Score table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Materials_management/">Materials management</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">How-to</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/Online_demo/">Online demo</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: 4.x</span><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Score table</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="score-table-task-description"></a>&quot;Score table&quot; task description<a class="hash-link" href="#score-table-task-description" title="Direct link to heading">#</a></h2><p>This information system, created using the <strong>lsFusion Platform</strong>, should contain the functionality for keeping score at a hockey tournament.</p><p>A tournament is understood to mean a subset of games between teams (with two teams participating in each game), which result in points being awarded to the teams.</p><p>In each game, the result of each game can be a regular-time win of one of the teams (the winning team receives 3 points), an overtime win (the winning team receives 2 points, while the losing team receives 1), or a penalty shootout win (the winning team receives 2 points, while the losing team receives 1).</p><p>A team&#x27;s score table ranking is determined by the total number of points. In case of a tie, additional parameters are considered: number of regular-time victories, number of overtime victories, number of penalty shootout victories, the difference between scores and misses, number of scores. Additional parameters for determining the final ranking are applied consecutively in a specified order until a status is achieved in which the results of the teams are uniquely ranked.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="defining-the-domain-logic"></a>Defining the domain logic<a class="hash-link" href="#defining-the-domain-logic" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="module-declaration"></a>Module declaration<a class="hash-link" href="#module-declaration" title="Direct link to heading">#</a></h3><p>We declare a <a href="/Modules/">module</a> within which the required functionality will be implemented. We assign an arbitrary name to the module (for example, <code>HockeyStats</code>).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">MODULE HockeyStats;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We define the use of functionality from other modules in the <code>HockeyStats</code> module. In particular, we need the system module <code>System</code>, in which some system elements used in the example are declared.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">REQUIRE System, Utils;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="team-definition"></a>Team definition<a class="hash-link" href="#team-definition" title="Direct link to heading">#</a></h3><p>We introduce the concept of a team, for which we create a separate <a href="/Classes/">class</a> using the corresponding <a href="/CLASS_statement/">statement <code>CLASS</code></a>. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">CLASS Team &#x27;Team&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We assign a name to the class created (for example, <code>Team</code>), which will subsequently be used when building <a href="/Expression/">expressions</a>, as well as a caption to display on custom forms (for example, <code>&#x27;Team&#x27;</code>).</p><p>So that all teams can be easily identified when working with forms created later, we create a name for the team. In other words, we create a <code>name</code> <a href="/Properties/">property</a> that can be defined for objects of the <code>Team</code> class.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">name &#x27;Team name&#x27; = DATA STRING[30] (Team) IN base;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Thus, the team name is a <a href="/Data_properties_DATA/">data</a> (user-entered) string-type property. Using the <code>IN</code> option, the created property is added to the predefined <code>base</code> <a href="/Groups_of_properties_and_actions/">property group</a>. Object properties belonging to the <code>base</code> group will be automatically displayed on the dialog form for selecting an object of the <code>Team</code> class.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="game-definition"></a>Game definition<a class="hash-link" href="#game-definition" title="Direct link to heading">#</a></h3><p>We introduce the concept of the game and its attributes: date, participants (host team and guest team), and their names.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">CLASS Game &#x27;Game&#x27;;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">date &#x27;Date&#x27; = DATA DATE (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostTeam = DATA Team (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestTeam = DATA Team (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostTeamName &#x27;Hosts&#x27; (Game game) = name(hostTeam(game));</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestTeamName &#x27;Guests&#x27; (Game game) = name(guestTeam(game));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>hostTeam</code> and <code>guestTeam</code> properties are <a href="/Data_properties_DATA/">data</a> object properties of a game, whose values are links to the host team and guest team, respectively (that is, to specific <code>Team</code>-class objects). Properties of the team names of the game hosts and guests (<code>hostTeamName</code> and <code>guestTeamName</code>) are created for subsequent use on forms. If the <code>hostTeam</code> and <code>guestTeam</code> properties are added to the form, the user will see the internal IDs of objects from the database.</p><p>We introduce the constraint that the game participants must be two different teams.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">CONSTRAINT hostTeam(Game team) = guestTeam(team) CHECKED BY hostTeam, guestTeam MESSAGE &#x27;Host and guest teams must be different&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The operating mechanism of this expression is as follows: when the host team or guest team of a game changes, the system checks the condition of equality of these teams <code>hostTeam(team) == guestTeam(team)</code>, and if it is met the system blocks the application of changes to the database, and also gives the user the specified message <code>&#x27;Host and guest teams must be different&#x27;</code>. In other words, the result of the expression specified after the <code>CONSTRAINT</code> operator must be <code>NULL</code>. In all other cases the restriction will be considered violated.  In addition, thanks to the <code>CHECKED BY</code> block, the created constraint will filter teams when selecting a home team or a guest team for a game (that is, it will exclude the team already set as the opponent from the list of teams in the dialog that appears upon selecting a team).</p><p>We define the number of goals scored by each team during the game.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">hostGoals &#x27;H goals&#x27; = DATA INTEGER (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestGoals &#x27;G goals&#x27; = DATA INTEGER (Game);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The defined properties use the <code>INTEGER</code> type, since the number of goals scored by each team is an integer.</p><p>We introduce the constraint that the game cannot end in a tie. The system should prohibit the user from setting an identical number of goals for both teams in the game, and issue a message with the specified text.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">CONSTRAINT hostGoals(Game game) = guestGoals(game) MESSAGE &#x27;The game cannot end in a draw&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="determining-the-winner-of-the-game"></a>Determining the winner of the game<a class="hash-link" href="#determining-the-winner-of-the-game" title="Direct link to heading">#</a></h3><p>We determine the winner of the game - the team that has scored more goals than its opponent.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">winner(Game game) = IF hostGoals(game) &gt; guestGoals(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                    THEN hostTeam(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                    ELSE guestTeam(game);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Here we use the operator <a href="/Selection_CASE_IF_MULTI_OVERRIDE_EXCLUSIVE/"><code>IF... THEN... ELSE</code></a>, which checks the condition that the host team in this game has scored more goals than the guest team. If it is met, the winner is the home team; if not, the guest team.</p><p>By a similar principle, the team that participated in the game and scored fewer goals than its opponent will be considered the loser.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">looser(Game game) = IF hostGoals(game) &gt; guestGoals(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                    THEN guestTeam(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                    ELSE hostTeam(game);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="determining-game-result"></a>Determining game result<a class="hash-link" href="#determining-game-result" title="Direct link to heading">#</a></h3><p>We introduce the concept of the possible game result with a predefined set of values: regular-time win, overtime win, penalty shootout win.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">CLASS GameResult &#x27;G/R&#x27; {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    win &#x27;W&#x27;,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    winOT &#x27;LO&#x27;,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    winSO &#x27;LB&#x27;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For this purpose we create a <code>GameResult</code> class and add three <a href="/Static_objects/">static objects</a> to it that are specified using expressions specified in braces <code>{ }</code>. In this case, the values <code>win</code>, <code>winOT</code>, <code>winSO</code> and <code>W</code>, <code>OW</code>, <code>SW</code> will be stored in the system properties <code>staticName</code> and <code>staticCaption</code>, respectively.</p><p>We create the <code>resultName</code> property, which will return the caption of the game result (<code>W</code>, <code>OW</code>, or <code>SW</code>). To do this, we take the system property <code>staticCaption</code>, which is supported for all objects in the system, and constrain its signature using the <code>IF</code> operator, indicating that the object must be of the <code>Game</code> class. This property is added to the <code>base</code> property group so that it appears in the automatic dialog for selecting an object of the <code>GameResult</code> class.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">resultName &#x27;Name&#x27; (GameResult game) = staticCaption(game) IF game IS GameResult IN base;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We determine the result of a particular game. In case when one of the teams won by 2 or more goals, the game result is considered a regular-time win. If not, and only if not, the game result (the type of win for a given score) will be set by the user. However, the user cannot set a regular-time win as the game result.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">userResult = DATA GameResult (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">result (Game game) = OVERRIDE userResult(game),</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    (GameResult.win IF ((hostGoals(game) (-) guestGoals(game)) &gt; 1 OR (guestGoals(game) (-) hostGoals(game)) &gt; 1));</span></span><span class="token-line" style="color:#403f53"><span class="token plain">resultName &#x27;G/R&#x27; (Game game) = resultName(result(game));</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CONSTRAINT ((hostGoals(Game game) (-) guestGoals(game)) &gt; 1 OR (hostGoals(game) (-) guestGoals(game)) &lt; -1) AND userResult(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    MESSAGE &#x27;The result of the game is determined automatically&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To determine the game result, the <code>OVERRIDE</code> operator is used, which returns the first non-<code>NULL</code> value in the order in which expressions are specified. In this case, calculating the <code>result</code> property will return either an object of the static class <code>GameResult.win</code>, if the goal difference in the game is greater than <code>1</code>, or the value of the <code>userResult</code> data property.</p><p>In order to always determine a result for the game, we create a constraint that ensures that the user sets the value of the <code>userResult</code> property if the result is not calculated based on the game score.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">CONSTRAINT ((hostGoals(Game game) (-) guestGoals(game)) &lt; 2 AND (hostGoals(game) (-) guestGoals(game)) &gt; -2) AND NOT userResult(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    MESSAGE &#x27;Specify the result of the game&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The result of the <code>NOT userResult(game)</code> expression will be true only if <code>userResult(game)</code> is not defined (that is, if it is <code>NULL</code>). Thus, the constraint will be violated if the score difference is <code>1</code>, and the type of win is not specified by the user.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-a-score-table"></a>Creating a score table<a class="hash-link" href="#creating-a-score-table" title="Direct link to heading">#</a></h3><p>The score table is the ranking of the teams in a tournament - a list of teams sorted by ranking.</p><p>We define the indicators that determine the team&#x27;s place on the scoreboard:</p><ul><li>number of games played by the team at home and away, and their total number  <div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">hostGamesPlayed = GROUP SUM 1 BY hostTeam(Game game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestGamesPlayed = GROUP SUM 1 BY guestTeam(Game game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesPlayed &#x27;G&#x27; (Team team) = hostGamesPlayed(team) (+) guestGamesPlayed(team);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul><p>Here, the construction <code>(+)</code> is used instead of the arithmetic <code>+</code> to obtain the correct result if at least one of the terms has a value of <code>NULL</code>. Using <code>(+)</code> in this case is equivalent to replacing a possible <code>NULL</code> with <code>0</code>. If one of the terms is <code>NULL</code>, then using the arithmetic <code>+</code> will also result in a value of <code>NULL</code>.</p><p>To determine the number of games played by the team at home and away, the <a href="/Grouping_GROUP/"><code>GROUP SUM</code></a> operator is used, which allows you to get the sum of the calculation results of a given expression for objects of a certain class, grouped by one or more of their attributes (similar to subtotals in Excel). Here the number <code>1</code> is specified for summation, and all games are grouped by guest team and host team (the <code>BY</code> block). As a result, for example, the <code>hostGamesPlayed</code> property determines for the team (since the result of the <code>hostTeam</code> property calculation is the <code>Team</code>-class object) the number (that is, the sum of the number <code>1</code> for all games where the host team is equal to the defined one) of games played as hosts (the <code>hostTeam</code> property is specified only for objects of the <code>Game</code> class). With this calculation the system analyzes all games entered into the system.</p><ul><li><p>number of games won in regular time, in overtime, and in extra time  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">gamesWonBy(Team team, GameResult type) = OVERRIDE [GROUP SUM 1 BY winner(Game game), result(game)](team, type), 0;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesWon &#x27;W&#x27; (Team team) = gamesWonBy(team, GameResult.win);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesWonOT &#x27;WO&#x27; (Team team) = gamesWonBy(team, GameResult.winOT);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesWonSO &#x27;WB&#x27; (Team team) = gamesWonBy(team, GameResult.winSO);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul><p>Since the logic for determining the number of wins of each type for a team is almost identical, we create and use the intermediate property <code>gamesWonByResult</code>, which is defined for a pair of objects (arguments). This property calculates for the team (first argument) the number of wins of a given type (second argument). The value of the <code>gamesWonBy</code> property is calculated with the <code>OVERRIDE</code> operator, which takes as input an expression specified in brackets <code>[...]</code> and <code>0</code>. If the expression value is <code>NULL</code>, the result of the whole property will be the value <code>0</code>. A nested expression is specified in square brackets using the <a href="/Grouping_GROUP/"><code>GROUP SUM</code></a> construct. Using a given expression in brackets is identical to using a previously defined property with a similar expression. Thus, the construction <code>[...]</code> allows you to simply reduce the number of lines of code. Here, <a href="/Grouping_GROUP/"><code>GROUP SUM</code></a> returns the total sum on number <code>1</code> for all games grouped by game winner and game result.</p><p>The total result of the <code>gamesWonByResult</code> property will be the number of wins of a given type for a given team, or zero if the team did not have any wins of this type (that is, if <code>[GROUP SUM 1 BY winner(Game game), result(game)]</code> for a given team and type of win is <code>NULL</code>).</p><ul><li><p>number of games played in regular time, in overtime and in extra time (determined by analogy with the above-specified properties of the number of wins)  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">gamesLostBy(Team team, GameResult type) = OVERRIDE [GROUP SUM 1 BY looser(Game game), result(game)](team, type), 0;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesLost &#x27;L&#x27; (Team team) = gamesLostBy(team, GameResult.win);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesLostOT &#x27;LO&#x27; (Team team) = gamesLostBy(team, GameResult.winOT);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesLostSO &#x27;LB&#x27; (Team team) = gamesLostBy(team, GameResult.winSO);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul><p>We calculate the number of points scored by the team in the tournament. The calculation is the sum of the number of wins of a particular type for each team, multiplied by the number of points awarded.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">points &#x27;Points&#x27; (Team team) = gamesWon(team) * 3 + (gamesWonSO(team) + gamesWonOT(team)) * 2 + gamesLostOT(team) + gamesLostSO(team);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To be used as additional indicators for ranking teams, we calculate the total number of goals scored and missed by the team.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">hostGoalsScored = GROUP SUM hostGoals(Game game) BY hostTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestGoalsScored = GROUP SUM guestGoals(Game game) BY guestTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">goalsScored &#x27;Scored goals&#x27; (Team team) = OVERRIDE hostGoalsScored(team) (+) guestGoalsScored(team), 0 IF team IS Team;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostGoalsConceded = GROUP SUM guestGoals(Game game) BY hostTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestGoalsConceded = GROUP SUM hostGoals(Game game) BY guestTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">goalsConceded &#x27;Conceded goals&#x27; (Team team) = OVERRIDE hostGoalsConceded(team) (+) guestGoalsConceded(team), 0 IF team IS Team;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We determine the place of the team on the scoreboard.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">place &#x27;Rank&#x27; (Team team) = PARTITION SUM 1 ORDER DESC points(team), gamesWon(team), gamesWonOT(team), gamesWonSO(team),</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                                               (OVERRIDE goalsScored(team) (-) goalsConceded(team), 0), goalsScored(team);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>place</code> property &quot;Team place on the score table&quot; is determined using the construction <a href="/Partitioning_sorting_PARTITION_..._ORDER/"><code>PARTITION SUM</code></a>, which for all objects of a certain class in a cumulative total, the sequence of which is specified by the <code>ORDER</code> operator, calculates the sum of the results of the calculation of a specified expression. It is important to remember that the values of all properties involved in determining the order must not be <code>NULL</code>. For this purpose, the penultimate expression uses the <code>OVERRIDE</code> operator so that the number 0 is used instead of <code>NULL</code>.</p><p>Thus, the logic for determining the <code>place</code> property for each command is as follows:</p><ul><li>all teams are arranged in a sequence (ranked) in descending order of the values of certain parameters (number of points scored, games won in regular time, and other properties specified after the <code>ORDER DESC</code> operator)</li><li>The sum of the values of the specified <code>SUM</code> expression (in this case, number <code>1</code>) is calculated for each team. The sum is calculated for all teams preceding that team in the ranked list (including that team). That is, <code>1</code> for the first team, <code>1+1</code> for the second, <code>1+1+1</code> for the third, etc.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="defining-view-logic"></a>Defining view logic<a class="hash-link" href="#defining-view-logic" title="Direct link to heading">#</a></h2><p>We add an interface that allows you to work with the developed system, entering data into the system and obtaining the necessary information from it. The form being created will consist of two vertically arranged blocks, in the upper of which the user will be able to add, modify, and delete games with all their attributes, while in the lower one there will be a score table displaying the results of the games and allowing to add or delete teams and change their names.</p><p>We declare the form with a name and caption. We add to the form a block of objects of the <code>Game</code> class with all the properties defined in the system. We also place a button on the form for adding a new game and deleting it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">FORM MainForm &#x27;Score table&#x27;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS game = Game</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES(game) date, hostTeamName, hostGoals, guestGoals, guestTeamName, resultName, NEW, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>FORM</code> statement creates an empty form with <a href="/Form_structure/">a certain default functionality</a>. Using the <code>OBJECTS game=Game</code> expression, a <code>game</code> object is added to the form: a table view block containing all instances of the <code>Game</code> class entered in the system. Using the expression <code>PROPERTIES(game)</code> with a the subsequent listing of a subset of properties, the specified properties are added to the form, and objects of the &quot;game&quot; block are passed to them as arguments. In addition to previously created properties, the <a href="/Actions/">actions</a> <code>NEW</code> and <code>DELETE</code> are also placed on the form, which will visually appear as buttons and allow you to add and remove objects of the <code>Game</code> class.</p><p>Data properties displayed on a form that are of a primitive type (<code>date</code>, <code>hostGoals</code>, <code>guestGoals</code>) will visually appear as cells that can be filled and changed by the user. Calculated properties that return an attribute of another object (<code>hostTeamName</code>, <code>guestTeamName</code>, <code>resultName</code>) will appear as cells. When these are clicked, a dialog box with the list of their objects and base group properties will be shown (for example, when clicking on the cell <code>hostTeamName</code> &quot;Guests&quot; a dialog box appears with the list of teams). In the dialog box you can select one of the objects, thus changing the property value for the object of the original form (for example, changing the game host team).</p><p>We extend the form by adding a score table block to it. The score table will be shown as a list of teams (objects of the <code>Team</code> class) with their statistical indicators, sorted by rating using the <code>ORDERS</code> operator.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">EXTEND FORM MainForm</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS team = Team</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES(team) place, name, gamesPlayed, gamesWon, gamesWonOT, gamesWonSO,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                     gamesLostSO, gamesLostOT, gamesLost, goalsScored, goalsConceded, points, NEW, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    ORDERS place(team)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The above form can be defined with a single block of code without using the <code>EXTEND FORM</code> statement.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">FORM MainFormSingle &#x27;Score table&#x27;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS game = Game</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES(game) date, hostTeamName, hostGoals, guestGoals, guestTeamName, resultName, NEW, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS team = Team</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES(team) place, name, gamesPlayed, gamesWon, gamesWonOT, gamesWonSO,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                     gamesLostSO, gamesLostOT, gamesLost, goalsScored, goalsConceded, points, NEW, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    ORDERS place(team)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div><p>We place the created form on the main menu of the program - the predefined navigator <code>root</code> folder - and indicate that it should be positioned by the very first element in front of the system menu item <code>&#x27;Administration&#x27;</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">NAVIGATOR {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    NEW MainForm FIRST;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The process of creating an information system is completed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-complete-source-code-on-github"></a>The complete source code (on <a href="https://github.com/lsfusion/samples/tree/master/hockeystats" target="_blank" rel="noopener noreferrer">GitHub</a>)<a class="hash-link" href="#the-complete-source-code-on-github" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lsf"><pre tabindex="0" class="prism-code language-lsf codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token plain">MODULE HockeyStats;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">// logic description: https://documentation.lsfusion.org/pages/viewpage.action?pageId=2228240</span></span><span class="token-line" style="color:#403f53"><span class="token plain">REQUIRE System, Utils;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CLASS Team &#x27;Team&#x27;;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">name &#x27;Team name&#x27; = DATA STRING[30] (Team) IN base;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CLASS Game &#x27;Game&#x27;;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">date &#x27;Date&#x27; = DATA DATE (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostTeam = DATA Team (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestTeam = DATA Team (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostTeamName &#x27;Hosts&#x27; (Game game) = name(hostTeam(game));</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestTeamName &#x27;Guests&#x27; (Game game) = name(guestTeam(game));</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CONSTRAINT hostTeam(Game team) = guestTeam(team) CHECKED BY hostTeam, guestTeam MESSAGE &#x27;Host and guest teams must be different&#x27;;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostGoals &#x27;H goals&#x27; = DATA INTEGER (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestGoals &#x27;G goals&#x27; = DATA INTEGER (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CONSTRAINT hostGoals(Game game) = guestGoals(game) MESSAGE &#x27;The game cannot end in a draw&#x27;;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">winner(Game game) = IF hostGoals(game) &gt; guestGoals(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                    THEN hostTeam(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                    ELSE guestTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">looser(Game game) = IF hostGoals(game) &gt; guestGoals(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                    THEN guestTeam(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                    ELSE hostTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CLASS GameResult &#x27;G/R&#x27; {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    win &#x27;W&#x27;,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    winOT &#x27;LO&#x27;,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    winSO &#x27;LB&#x27;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">resultName &#x27;Name&#x27; (GameResult game) = staticCaption(game) IF game IS GameResult IN base;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">userResult = DATA GameResult (Game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">result (Game game) = OVERRIDE userResult(game),</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    (GameResult.win IF ((hostGoals(game) (-) guestGoals(game)) &gt; 1 OR (guestGoals(game) (-) hostGoals(game)) &gt; 1));</span></span><span class="token-line" style="color:#403f53"><span class="token plain">resultName &#x27;G/R&#x27; (Game game) = resultName(result(game));</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CONSTRAINT ((hostGoals(Game game) (-) guestGoals(game)) &gt; 1 OR (hostGoals(game) (-) guestGoals(game)) &lt; -1) AND userResult(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    MESSAGE &#x27;The result of the game is determined automatically&#x27;;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CONSTRAINT ((hostGoals(Game game) (-) guestGoals(game)) &lt; 2 AND (hostGoals(game) (-) guestGoals(game)) &gt; -2) AND NOT userResult(game)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    MESSAGE &#x27;Specify the result of the game&#x27;;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostGamesPlayed = GROUP SUM 1 BY hostTeam(Game game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestGamesPlayed = GROUP SUM 1 BY guestTeam(Game game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesPlayed &#x27;G&#x27; (Team team) = hostGamesPlayed(team) (+) guestGamesPlayed(team);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesWonBy(Team team, GameResult type) = OVERRIDE [GROUP SUM 1 BY winner(Game game), result(game)](team, type), 0;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesWon &#x27;W&#x27; (Team team) = gamesWonBy(team, GameResult.win);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesWonOT &#x27;WO&#x27; (Team team) = gamesWonBy(team, GameResult.winOT);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesWonSO &#x27;WB&#x27; (Team team) = gamesWonBy(team, GameResult.winSO);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesLostBy(Team team, GameResult type) = OVERRIDE [GROUP SUM 1 BY looser(Game game), result(game)](team, type), 0;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesLost &#x27;L&#x27; (Team team) = gamesLostBy(team, GameResult.win);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesLostOT &#x27;LO&#x27; (Team team) = gamesLostBy(team, GameResult.winOT);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">gamesLostSO &#x27;LB&#x27; (Team team) = gamesLostBy(team, GameResult.winSO);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">points &#x27;Points&#x27; (Team team) = gamesWon(team) * 3 + (gamesWonSO(team) + gamesWonOT(team)) * 2 + gamesLostOT(team) + gamesLostSO(team);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostGoalsScored = GROUP SUM hostGoals(Game game) BY hostTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestGoalsScored = GROUP SUM guestGoals(Game game) BY guestTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">goalsScored &#x27;Scored goals&#x27; (Team team) = OVERRIDE hostGoalsScored(team) (+) guestGoalsScored(team), 0 IF team IS Team;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">hostGoalsConceded = GROUP SUM guestGoals(Game game) BY hostTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">guestGoalsConceded = GROUP SUM hostGoals(Game game) BY guestTeam(game);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">goalsConceded &#x27;Conceded goals&#x27; (Team team) = OVERRIDE hostGoalsConceded(team) (+) guestGoalsConceded(team), 0 IF team IS Team;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">place &#x27;Rank&#x27; (Team team) = PARTITION SUM 1 ORDER DESC points(team), gamesWon(team), gamesWonOT(team), gamesWonSO(team),</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                                               (OVERRIDE goalsScored(team) (-) goalsConceded(team), 0), goalsScored(team);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">FORM MainForm &#x27;Score table&#x27;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS game = Game</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES(game) date, hostTeamName, hostGoals, guestGoals, guestTeamName, resultName, NEW, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">EXTEND FORM MainForm</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS team = Team</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES(team) place, name, gamesPlayed, gamesWon, gamesWonOT, gamesWonSO,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                     gamesLostSO, gamesLostOT, gamesLost, goalsScored, goalsConceded, points, NEW, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    ORDERS place(team)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">FORM MainFormSingle &#x27;Score table&#x27;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS game = Game</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES(game) date, hostTeamName, hostGoals, guestGoals, guestTeamName, resultName, NEW, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS team = Team</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES(team) place, name, gamesPlayed, gamesWon, gamesWonOT, gamesWonSO,</span></span><span class="token-line" style="color:#403f53"><span class="token plain">                     gamesLostSO, gamesLostOT, gamesLost, goalsScored, goalsConceded, points, NEW, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    ORDERS place(team)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">NAVIGATOR {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    NEW MainForm FIRST;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">CLASS Event;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">date = DATA DATE (Event);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">date(Event e) &lt;- currentDate() WHEN SET(e IS Event);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">title = DATA STRING (Event);</span></span><span class="token-line" style="color:#403f53"><span class="token plain">title(Event e) &lt;- &#x27;Event&#x27; + e WHEN SET(e IS Event);</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">FORM calendar</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    OBJECTS e=Event CUSTOM &#x27;calendar&#x27;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    PROPERTIES (e) date, title, NEW, EDIT, DELETE</span></span><span class="token-line" style="color:#403f53"><span class="token plain">;</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">NAVIGATOR {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    NEW calendar;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/lsfusion/platform/edit/v4/docs/en/Score_table.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-06-09T14:39:43.000Z">6/9/2021</time></b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Examples/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Materials_management/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Materials management ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#score-table-task-description" class="table-of-contents__link">&quot;Score table&quot; task description</a></li><li><a href="#defining-the-domain-logic" class="table-of-contents__link">Defining the domain logic</a><ul><li><a href="#module-declaration" class="table-of-contents__link">Module declaration</a></li><li><a href="#team-definition" class="table-of-contents__link">Team definition</a></li><li><a href="#game-definition" class="table-of-contents__link">Game definition</a></li><li><a href="#determining-the-winner-of-the-game" class="table-of-contents__link">Determining the winner of the game</a></li><li><a href="#determining-game-result" class="table-of-contents__link">Determining game result</a></li><li><a href="#creating-a-score-table" class="table-of-contents__link">Creating a score table</a></li></ul></li><li><a href="#defining-view-logic" class="table-of-contents__link">Defining view logic</a></li><li><a href="#the-complete-source-code-on-github" class="table-of-contents__link">The complete source code (on GitHub)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">lsf docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://ru.stackoverflow.com/questions/tagged/lsfusion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://slack.lsfusion.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/lsfusion" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://habr.com/ru/company/lsfusion/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Habr<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/lsfusion/platform" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 lsFusion Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fca95e41.js"></script>
<script src="/assets/js/main.307bb336.js"></script>
</body>
</html>